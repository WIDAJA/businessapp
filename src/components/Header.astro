---
import HeaderButton from "./HeaderButton.astro";

const menu = [
  {
    id: "btnHome",
    text: "Inicio",
    href: "/",
    icon: "/assets/icons/home.svg",
    alt: "Icono de inicio",
  },
  {
    id: "btnServices",
    text: "Servicios",
    href: "/services",
    icon: "/assets/icons/service.svg",
    alt: "Icono de Servicios",
  },
  {
    id: "btnContactUs",
    text: "Contáctanos",
    href: "/",
    icon: "/assets/icons/contact.svg",
    alt: "Icono de contáctanos",
  },
];
---

<header class="flex flex-row justify-between w-full items-center">
  <img src="/assets/img/logo.svg" alt="Logo de businessapp" />

  <nav class="flex gap-7">
    {
      menu.map((x) => (
        <HeaderButton href={x.href} id={x.id}>
          <img src={x.icon} alt={x.alt} slot="before" />
          {x.text}
        </HeaderButton>
      ))
    }
  </nav>
</header>

<script define:vars={{ menu }}>
  //#region Methods

  const setSelectedClass = ({ id }) => {
    const anchor = document.getElementById(id);
    anchor.classList.add("border-b-accent");
  };

  //#endregion

  //#region Constructor

  (() => {
    const { pathname } = new URL(window.location);

    const index = menu.findIndex((x) => x.href === pathname);

    if (index === -1) {
      return;
    }

    setSelectedClass(menu[index]);
  })();

  //#endregion
</script>
